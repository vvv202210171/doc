# API：获取所有可以交易的交易对信息列表

Base URL

- https://m.ibmxi.com/api

Endpoint（概览）

- 方法：GET
- 路径：`/trad/symbols`
- 完整 URL：`https://m.ibmxi.com/api/trad/symbols`
- 描述：返回币币交易（trad）下的行情 / 交易对信息列表，供前端展示行情及交易对选择。
- 权限：公开（可选 authorization header，系统会使用 redis 缓存来加速返回）

请求参数（Query）

| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| klineType | string | 否 | K 线类型编码，用于过滤（对应服务端 CoinTypeEnum），可不传表示全部。示例：`1`、`Crypto` |

示例请求（curl）

- 不带参数：

curl -X GET "https://m.ibmxi.com/api/trad/symbols"

- 带参数：

curl -G "https://m.ibmxi.com/api/trad/symbols" --data-urlencode "klineType=1"

Java 调用示例（Spring RestTemplate）

```java
RestTemplate rt = new RestTemplate();
String url = "https://m.ibmxi.com/api/trad/symbols?klineType=1";
ResponseEntity<String> resp = rt.getForEntity(url, String.class);
System.out.println(resp.getBody());
```

统一响应格式

本项目接口通常返回统一封装 `R<T>`：

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": ...
}
```

- code: 整数（200 表示成功，非 200 表示出错）
- msg: 简短描述
- data: 返回主体，这里为 `List<CoinTypeVo>`

示例成功响应（简化）

```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "autoid": 1,
      "instId": null,
      "tradcoin": "BTC",
      "maincoin": "USDT",
      "gas": "0.001",
      "state": "enable",
      "height": "67000.00",
      "low": "64500.00",
      "price": "65234.56",
      "volume": 1234.56,
      "rise": "-0.5",
      "priceAccuracy": 2,
      "amountAccuracy": 3,
      "cny": "460000",
      "plate": "main",
      "minnumber": "0.001",
      "logo": "https://.../btc.png",
      "klineType": "Crypto",
      "symbol": "BTC_USDT",
      "chinaname": "比特币",
      "maxnumber": "100.0",
      "unit": "BTC",
      "marketcontrl": "Y",
      "market": "65234.56",
      "marketBuyFee": 0.001,
      "marketSellFee": 0.001,
      "limitBuyFee": 0.0015,
      "limitSellFee": 0.0015
    }
  ]
}
```

CoinTypeVo 字段说明（来自 `com.sdt.web.entity.CoinTypeVo`）

| 字段 | 类型 | 说明 |
|------|------|------|
| autoid | Integer | 表记录自增 ID |
| instId | String | 交易所/合约标识（若有） |
| tradcoin | String | 交易币（如 BTC） |
| maincoin | String | 计价币/主币（如 USDT） |
| gas | String | 手续费相关字段（业务含义可能不同模块略有差异） |
| state | String | 状态（例如 enable/disable） |
| height | String | 最高价（通常为 24h high） |
| low | String | 最低价（24h low） |
| price | String | 最新价（字符串形式，前端按 priceAccuracy 格式化） |
| volume | BigDecimal | 交易量 |
| rise | String | 涨跌幅（或涨跌值） |
| priceAccuracy | Integer | 价格精度（小数位数） |
| amountAccuracy | Integer | 数量精度（小数位数） |
| cny | String | 人民币估值或相关字段 |
| plate | String | 交易板块 |
| minnumber | String | 单笔最小交易量 |
| logo | String | 币种图标 URL 或标识 |
| klineType | String | K 线类型编码（与 CoinTypeEnum 对应） |
| symbol | String | 交易对标识（例如 BTC_USDT） |
| chinaname | String | 中文名称 |
| maxnumber | String | 单笔最大交易量 |
| unit | String | 单位 |
| marketcontrl | String | 市场控制标识（是否被市场价控制等） |
| market | String | 市场价格（用于展示） |
| marketBuyFee | BigDecimal | 市价买单手续费 |
| marketSellFee | BigDecimal | 市价卖单手续费 |
| limitBuyFee | BigDecimal | 限价买单手续费 |
| limitSellFee | BigDecimal | 限价卖单手续费 |

错误码（常见）

| code | 含义 |
|------|------|
| 200 | 成功 |
| 1 | 参数错误 |
| 401 | 未授权 |
| 500 | 服务器内部错误 |

注意事项

- 缓存：该接口在服务端会使用 Redis 缓存（key 形如 `RedisKeyConstant.TRAD_SYMBOLS + code`），短时间内结果可能被缓存，导致短暂延迟。
- 精度：前端请使用返回的 `priceAccuracy` / `amountAccuracy` 格式化数字展示。
- 频率：行情接口建议每 2-5 秒轮询一次，避免短时高频请求压垮后端。
- 字段来源：部分字段（如 `cny`, `plate`, `market`）对应不同 Mapper/SQL 列，若需精确来源我可以追踪并在文档中注明表名与列名。

维护信息

- 文档路径：`doc/trad_symbols_api.md`
- 更新时间：2026-02-11
- 负责人：开发/文档团队


